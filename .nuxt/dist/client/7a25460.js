(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{431:function(e,t,n){var content=n(433);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("10f43ecd",content,!0,{sourceMap:!1})},432:function(e,t,n){"use strict";n(431)},433:function(e,t,n){(t=n(17)(!1)).push([e.i,".split-wrapper{display:flex;align-items:center}.split-wrapper .icon{font-size:1.4rem}.split-wrapper .desc{font-size:13px;font-weight:700;padding:0 10px 0 5px;letter-spacing:2px;text-transform:uppercase}.split-wrapper .split{flex:1;height:1px;background-color:var(--border-color)}",""]),e.exports=t},434:function(e,t,n){"use strict";var r={props:{icon:String,desc:String},methods:{getIcon:function(e){return/icon/.test(e)?e:"icon-"+e}}},o=(n(432),n(4)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"split-wrapper"},[e.icon?n("i",{staticClass:"icon",class:e.getIcon(e.icon)}):e._e(),e._v(" "),e.desc?n("span",{staticClass:"desc"},[e._v(e._s(e.desc))]):e._e(),e._v(" "),n("div",{staticClass:"split"})])}),[],!1,null,null,null);t.a=component.exports},436:function(e,t,n){var content=n(446);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("30b81a99",content,!0,{sourceMap:!1})},438:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d}));n(34),n(35),n(8);var r=n(2).a.prototype.$isServer,o=function(){if(!r&&document.addEventListener)return function(element,e,t){element&&e&&t&&element.addEventListener(e,t,!1)}}(),c=function(){if(!r&&document.removeEventListener)return function(element,e,t){element&&e&&t&&element.removeEventListener(e,t,!1)}}(),l=function(element){var e=0,t=element.ownerDocument||element.document,n=t.defaultView||t.parentWindow;if(n.getSelection().rangeCount>0){var r=n.getSelection().getRangeAt(0),o=r.cloneRange();o.selectNodeContents(element),o.setEnd(r.endContainer,r.endOffset),e=o.toString().length}return e},d=function(element,e){var t=document.createRange();if(!(element.firstChild.length<e)){t.setStart(element.firstChild,e),t.setEnd(element.firstChild,e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}}},442:function(e,t,n){"use strict";var r=n(444),o=n.n(r),c=n(96),l=n(100);t.a=function(e){return e&&c.a.validateEmail(e)?l.a.url(e,{protocol:"https"}):o.a}},443:function(e,t,n){var r=n(12);r(r.S,"Object",{is:n(209)})},444:function(e,t,n){e.exports=n.p+"img/default.8d326fe.png"},445:function(e,t,n){"use strict";n(436)},446:function(e,t,n){(t=n(17)(!1)).push([e.i,'.fade-transform-enter-active[data-v-2945e851],.fade-transform-leave-active[data-v-2945e851]{transition:all .5s}.fade-transform-enter[data-v-2945e851]{opacity:0;transform:translateX(-30px)}.fade-transform-leave-to[data-v-2945e851]{opacity:0;transform:translateX(30px)}.mobile-slide-enter-active[data-v-2945e851],.mobile-slide-leave-active[data-v-2945e851]{transition:all .2s ease-in-out}.mobile-slide-enter[data-v-2945e851],.mobile-slide-leave-to[data-v-2945e851]{transform:translateX(100%)}.search-slide-enter-active[data-v-2945e851],.search-slide-leave-active[data-v-2945e851]{transition:all .35s ease-in-out}@media (max-width:1024px){.search-slide-enter-active[data-v-2945e851],.search-slide-leave-active[data-v-2945e851]{transition:all .25s ease-in-out}}.search-slide-enter[data-v-2945e851],.search-slide-leave-to[data-v-2945e851]{transform:translateX(100%)}.fade-enter-active[data-v-2945e851],.fade-leave-active[data-v-2945e851]{transition:opacity .3s}.fade-enter[data-v-2945e851],.fade-leave-active[data-v-2945e851]{opacity:0}.fade-move[data-v-2945e851]{transition:transform .3s}.fade-leave-active[data-v-2945e851]{position:absolute}.list-slide-enter[data-v-2945e851],.list-slide-leave-to[data-v-2945e851]{opacity:0;transform:translateY(30px)}.list-slide-leave-active[data-v-2945e851]{width:100%;position:absolute}.slide-up-enter-active[data-v-2945e851]{transition:all .3s ease .1s}.slide-up-leave-active[data-v-2945e851]{transition:all .3s ease}.slide-up-enter[data-v-2945e851],.slide-up-leave-active[data-v-2945e851]{transform:translateY(-20px);opacity:0}.slide-up-move[data-v-2945e851]{transition:all .5s}.editor-container[data-v-2945e851]{display:flex;justify-content:space-between;align-items:flex-start}.avatar[data-v-2945e851]{display:inline-block;width:36px;height:36px;border-radius:50%;background-color:#eee}@media (max-width:480px){.avatar[data-v-2945e851]{display:none}}.slide-wrapper[data-v-2945e851]{position:relative}.message-container .comment-wrapper[data-v-2945e851]{width:100%}.message-container .slide-wrapper[data-v-2945e851]{display:flex;flex-direction:column}.message-container .slide-wrapper .user-item[data-v-2945e851]{order:1;margin:5px 0 10px}@media (max-width:480px){.message-container .slide-wrapper .user-item .user-input[data-v-2945e851]{width:calc(100% - 20px)}}.message-container .slide-wrapper .editor-item[data-v-2945e851]{order:2}.message-container .slide-wrapper .tools-item[data-v-2945e851]{order:3}.comment-wrapper[data-v-2945e851]{width:calc(100% - 50px)}@media (max-width:480px){.comment-wrapper[data-v-2945e851]{width:100%}}.comment-wrapper .list-slide-item[data-v-2945e851]{transition:all .3s ease-in-out}.comment-wrapper .reply-target[data-v-2945e851]{box-sizing:border-box;position:relative;margin-bottom:10px;padding:10px;border:1px solid var(--border-color);border-radius:4px}.comment-wrapper .reply-target .icon-ant-close[data-v-2945e851]{display:flex;justify-content:center;align-items:center;position:absolute;top:5px;right:5px;width:30px;height:30px;font-size:20px;cursor:pointer}.comment-wrapper .reply-target .icon-ant-close[data-v-2945e851]:hover{color:var(--theme-active)}.comment-wrapper .editor[data-v-2945e851]{box-sizing:border-box;width:100%;min-height:6em;max-height:30em;padding:10px;font-size:1rem;color:var(--font-color-article);border:1px solid var(--border-color);border-radius:4px;outline:none;overflow-y:auto;transition:all .1s linear;font-family:Microsoft Yahei}.comment-wrapper .editor[data-v-2945e851]:empty:before{content:attr(placeholder);white-space:pre-wrap}.comment-wrapper .editor dt[data-v-2945e851]:before{content:"\\D\\A";white-space:pre}.comment-wrapper .editor dt[data-v-2945e851]:first-child:before{content:normal}.comment-wrapper .editor[data-v-2945e851]:focus,.comment-wrapper .editor[data-v-2945e851]:hover{border-color:var(--font-color-light)}.comment-wrapper .editor[data-v-2945e851]:focus:before{content:none}.comment-wrapper .user-wrapper[data-v-2945e851]{display:flex;align-items:center;font-size:1rem}@media (max-width:768px){.comment-wrapper .user-wrapper[data-v-2945e851]{flex-direction:column}}.comment-wrapper .user-wrapper .user-input[data-v-2945e851]{width:calc(32% - 20px);height:1em;margin-right:1em;line-height:normal;padding:8px 10px;outline:none;color:var(--font-color-article);white-space:nowrap;border:1px solid var(--border-color);border-radius:4px;background-color:var(--app-background-color);transition:all .1s linear;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.comment-wrapper .user-wrapper .user-input[data-v-2945e851]:focus,.comment-wrapper .user-wrapper .user-input[data-v-2945e851]:hover{border-color:var(--font-color-light)}@media (max-width:768px){.comment-wrapper .user-wrapper .user-input[data-v-2945e851]{width:calc(100% - 20px);margin:3px 5px}}.tools-wrapper[data-v-2945e851]{display:flex;justify-content:space-between;align-items:center}.tools-wrapper .tool-item[data-v-2945e851]{display:flex;justify-content:center;align-items:center;width:30px;height:30px;cursor:pointer;transition:all .1s linear}.tools-wrapper .tool-item[data-v-2945e851]:hover{background-color:var(--tool-background-color)}.editor-tools[data-v-2945e851]{display:flex;justify-content:flex-start;transition:all .1s linear;margin:5px 0}.editor-tools>a[data-v-2945e851]{position:relative;margin-right:10px}.editor-tools>a[data-v-2945e851]:last-child{margin-right:0}.emoji-wrapper[data-v-2945e851]{box-sizing:border-box;display:flex;justify-content:flex-start;flex-wrap:wrap;position:absolute;top:30px;left:0;width:200px;padding:10px;background-color:var(--code-background);z-index:1;cursor:default}.emoji-wrapper .emoji-item[data-v-2945e851]{display:flex;justify-content:center;align-items:center;box-sizing:border-box;font-size:20px;width:36px;height:36px}.emoji-wrapper .emoji-item[data-v-2945e851]:hover{background-color:var(--tool-background-color);cursor:pointer}',""]),e.exports=t},450:function(e,t,n){"use strict";n(34),n(35),n(8),n(97),n(52),n(443);var r=n(125),o=n(96),c=n(126),l=n.n(c),d=n(438),m=n(442),v=["😃","😂","😅","😉","😌","😔","😓","😘","😡","😭","😱","😳","😵","🌚","👍","👎","💪","🌹","💊"],f={props:{placeholder:{type:String},isShowReplyContent:{type:Boolean,default:!1},isMessageEditor:{type:Boolean,default:!1}},data:function(){return{isShowEmoji:!1,contentText:"",contentHtml:"",form:{nickname:"",content:"",email:""},reply:{replyNickname:"",replyContent:""},emojiList:v,cursorPosition:0}},directives:{ClickOutside:l.a},computed:{avatar:function(){return Object(m.a)(this.form.email)}},methods:{resetField:function(){this.form.content="",this.contentText="",this.contentHtml="",this.$refs.editContent.innerHTML="",this.$refs.editContent.innerText="",this.cursorPosition=0},closeReplyContent:function(){this.$emit("closeReplyContent")},contentChange:function(){var html=this.$refs.editContent.innerHTML,text=this.$refs.editContent.innerText;Object.is(html,this.comemntContentHtml)||(this.contentHtml=html),Object.is(text,this.comemntContentText)||(this.contentText=text),this.cursorPosition=Object(d.a)(this.$refs.editContent)},getCursorPosition:function(){this.cursorPosition=Object(d.a)(this.$refs.editContent)},send:function(){this.contentChange();var e=this.getInValidMsg();if(e)alert(e);else{var t={nickname:this.form.nickname,email:this.form.email,website:this.form.website};window.localStorage.setItem("USER",JSON.stringify(t)),this.$emit("send",this.form)}},getInValidMsg:function(){return this.form.content=this.contentText,this.form.email?!1===o.a.validateEmail(this.form.email)?"请填写正确的email格式":this.form.content&&this.form.content.replace(/\s/g,"")?(!this.form.nickname||this.form.nickname.length>32)&&"昵称不能为空且长度不能超过32个字符":this.form.content.length>1e3||this.form.content.split("\n").length>30?"".concat(this.isMessageEditor?"留言":"评论","内容不能超过1000个字且控制在30行以内"):this.isMessageEditor?"留言内容不能为空":"评论内容不能为空":"邮箱不能为空"},insertContent:function(e){this.updateEditContent({image:{start:"![",end:"]()"},link:{start:"[",end:"]()"},code:{start:"\n```\n",end:"\n```"}}[e])},insertEmoji:function(e){var t=this.$refs.editContent,text=t.innerText;t.innerText=text.slice(0,this.cursorPosition)+"".concat(e)+text.slice(this.cursorPosition,text.length),Object(d.d)(t,this.cursorPosition+2),this.cursorPosition=Object(d.a)(t)+2,this.contentChange()},updateEditContent:function(e){var t=e.start,n=void 0===t?"":t,r=e.end,o=void 0===r?"":r;if(n||o){var c=this.$refs.editContent,l=(window.getSelection||document.getSelection)().toString(),d=c.innerText;if(l){var m=d.replace(l,n+l+o);c.innerText=m}else c.innerText=c.innerText+=n+o}}},created:function(){var e=this;this.debouncedSend=Object(r.debounce)(1e3,!0,(function(){e.send()}));var t=window.localStorage.getItem("USER");t&&(t=JSON.parse(t),this.form.nickname=t.nickname||"",this.form.email=t.email||"",this.form.website=t.website||"")}},h=(n(445),n(4)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-container",class:{"message-container":e.isMessageEditor}},[e.isMessageEditor?e._e():n("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:e.form.nickname||"匿名用户"}}),e._v(" "),n("section",{staticClass:"comment-wrapper"},[n("transition-group",{staticClass:"slide-wrapper",attrs:{tag:"div",name:"list-slide"}},[e.isShowReplyContent?n("section",{key:1,staticClass:"list-slide-item reply-item"},[n("div",{staticClass:"reply-target"},[n("i",{staticClass:"icon icon-ant-close",on:{click:e.closeReplyContent}}),e._v(" "),n("strong",{staticClass:"reply-author"},[e._v("@"+e._s(e.reply.nickname))]),e._v(" "),n("div",{staticClass:"reply-content markdown",domProps:{innerHTML:e._s(e.reply.content)}})])]):e._e(),e._v(" "),n("section",{key:2,staticClass:"list-slide-item editor-item"},[n("div",{ref:"editContent",staticClass:"editor",attrs:{contenteditable:"true",placeholder:e.placeholder||(e.isMessageEditor?"我想说...":"评论...")},on:{keyup:e.contentChange,click:e.getCursorPosition}})]),e._v(" "),n("section",{key:3,staticClass:"list-slide-item tools-wrapper tools-item"},[n("div",{staticClass:"editor-tools"},[n("a",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){e.isShowEmoji=!1},expression:"() => {isShowEmoji = false}"}],staticClass:"tool-item",on:{click:function(t){e.isShowEmoji=!0}}},[n("i",{staticClass:"icon icon-smile"}),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowEmoji,expression:"isShowEmoji"}],staticClass:"emoji-wrapper"},e._l(e.emojiList,(function(t,r){return n("li",{key:r,staticClass:"emoji-item",on:{click:function(n){return n.stopPropagation(),e.insertEmoji(t)}}},[e._v("\n                                "+e._s(t)+"\n                            ")])})),0)]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:function(t){return e.insertContent("image")}}},[n("i",{staticClass:"icon icon-image"})]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:function(t){return e.insertContent("link")}}},[n("i",{staticClass:"icon icon-link"})]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:function(t){return e.insertContent("code")}}},[n("i",{staticClass:"icon icon-code"})])]),e._v(" "),n("a",{staticClass:"tool-item",on:{click:e.debouncedSend}},[n("i",{staticClass:"icon icon-send"})])]),e._v(" "),n("div",{key:4,staticClass:"list-slide-item user-item"},[n("section",{staticClass:"user-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nickname,expression:"form.nickname"}],staticClass:"user-input",attrs:{maxlength:"32",name:"text",required:!0,type:"text",placeholder:"昵称（必填）"},domProps:{value:e.form.nickname},on:{input:function(t){t.target.composing||e.$set(e.form,"nickname",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"user-input",attrs:{name:"email",type:"email",placeholder:"邮箱（必填）"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})])])])],1)])}),[],!1,null,"2945e851",null);t.a=component.exports},465:function(e,t,n){var content=n(490);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("c6d773cc",content,!0,{sourceMap:!1})},466:function(e,t,n){var content=n(492);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("f6dff154",content,!0,{sourceMap:!1})},467:function(e,t,n){var content=n(494);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("52660306",content,!0,{sourceMap:!1})},468:function(e,t,n){var content=n(496);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("39174097",content,!0,{sourceMap:!1})},469:function(e,t,n){var content=n(498);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("113b940c",content,!0,{sourceMap:!1})},489:function(e,t,n){"use strict";n(465)},490:function(e,t,n){(t=n(17)(!1)).push([e.i,'@media (max-width:480px){.recommend-container[data-v-cd9dee48]{padding-left:2em}}.recommend-item[data-v-cd9dee48]{display:flex;justify-content:flex-start;align-items:center;margin:6px 0;font-size:1rem}.recommend-item .time[data-v-cd9dee48]{margin-right:20px;font-size:16px}.recommend-item .title[data-v-cd9dee48]{cursor:pointer;position:relative}.recommend-item .title:hover .hover-dot[data-v-cd9dee48]{background-color:var(--theme-active)}.recommend-item .title .hover-dot[data-v-cd9dee48]{position:absolute;right:-10px;top:0;width:7px;height:7px;border-radius:50%;transition:all .25s ease}@media (max-width:1024px){.recommend-item .time[data-v-cd9dee48]{margin-right:16px;font-size:14px}.recommend-item .title[data-v-cd9dee48]{font-size:16px}}@media (max-width:480px){.recommend-item[data-v-cd9dee48]{position:relative}.recommend-item[data-v-cd9dee48]:before{content:"";position:absolute;top:9px;left:-18px;width:6px;height:6px;border-radius:50%;background-color:var(--font-color-primary)}.recommend-item .time[data-v-cd9dee48]{display:none}.recommend-item .title[data-v-cd9dee48]{font-size:14px}}',""]),e.exports=t},491:function(e,t,n){"use strict";n(466)},492:function(e,t,n){(t=n(17)(!1)).push([e.i,".load-more[data-v-39749f27]{box-sizing:border-box;width:40px;height:40px;margin:0 auto;border:8px solid #dcdfe7;border-radius:50%;transition:all .25s ease-in-out;cursor:pointer}@media (max-width:480px){.load-more[data-v-39749f27]{width:30px;height:30px;border-width:5px}}.load-more[data-v-39749f27]:hover{border-color:var(--theme-active);background-color:var(--theme-active);transform:scale(.65)}.comment-item[data-v-39749f27]{display:flex;justify-content:space-between;align-content:flex-start;margin-bottom:25px}.comment-item[data-v-39749f27]:last-child{margin-bottom:0}.comment-item .avatar[data-v-39749f27]{display:inline-block;width:36px;height:36px;border-radius:50%;background-color:#eee}@media (max-width:480px){.comment-item .avatar[data-v-39749f27]{display:none}}.comment-item .comment-detail[data-v-39749f27]{width:calc(100% - 50px)}@media (max-width:480px){.comment-item .comment-detail[data-v-39749f27]{width:100%}}.comment-item .comment-detail .nickname[data-v-39749f27]{display:flex;justify-content:flex-start;align-items:center;font-size:14px}.comment-item .comment-detail .nickname .mobile-avatar[data-v-39749f27]{display:none}@media (max-width:480px){.comment-item .comment-detail .nickname .mobile-avatar[data-v-39749f27]{display:inline-block;width:26px;height:26px;margin-right:10px;border-radius:50%;background-color:#eee}}.comment-item .comment-detail .nickname .website[data-v-39749f27]{font-size:20px;margin-right:6px}.comment-item .comment-detail .content[data-v-39749f27]{display:flex;align-items:center;margin:8px 0;font-size:1rem}.comment-item .comment-detail .reply-wrapper[data-v-39749f27]{box-sizing:border-box;padding:6px 10px;font-size:14px;border:1px solid var(--border-color);border-radius:4px;background-color:var(--primary-light-0);margin-bottom:8px}.comment-item .comment-detail .reply-wrapper .reply-nickname .iconzuozhe[data-v-39749f27]{font-weight:700}.comment-item .comment-detail .comment-footer[data-v-39749f27]{display:flex;justify-content:space-between;align-items:center}.comment-item .comment-detail .comment-footer .time[data-v-39749f27]{font-size:13px}.comment-item .comment-detail .comment-footer .tools[data-v-39749f27]{display:flex;justify-content:flex-start}.comment-item .comment-detail .comment-footer .tools>i[data-v-39749f27]{display:flex;justify-content:center;align-items:center;height:30px;margin-right:10px;cursor:pointer;overflow:hidden}.comment-item .comment-detail .comment-footer .tools>i[data-v-39749f27]:last-child{margin-right:0}.comment-item .comment-detail .comment-footer .tools>i .like-count[data-v-39749f27]{flex-shrink:0;margin-left:5px}.comment-item .comment-detail .comment-footer .tools .is-like[data-v-39749f27]{color:var(--theme-active)}.comment-item .comment-detail .split[data-v-39749f27]{box-sizing:border-box;width:100%;height:1px;margin-top:15px;background-color:var(--border-color)}",""]),e.exports=t},493:function(e,t,n){"use strict";n(467)},494:function(e,t,n){(t=n(17)(!1)).push([e.i,".comment-list-wrapper[data-v-368c1000]{margin-top:25px}",""]),e.exports=t},495:function(e,t,n){"use strict";n(468)},496:function(e,t,n){(t=n(17)(!1)).push([e.i,".fade-transform-enter-active[data-v-78a20f42],.fade-transform-leave-active[data-v-78a20f42]{transition:all .5s}.fade-transform-enter[data-v-78a20f42]{opacity:0;transform:translateX(-30px)}.fade-transform-leave-to[data-v-78a20f42]{opacity:0;transform:translateX(30px)}.mobile-slide-enter-active[data-v-78a20f42],.mobile-slide-leave-active[data-v-78a20f42]{transition:all .2s ease-in-out}.mobile-slide-enter[data-v-78a20f42],.mobile-slide-leave-to[data-v-78a20f42]{transform:translateX(100%)}.search-slide-enter-active[data-v-78a20f42],.search-slide-leave-active[data-v-78a20f42]{transition:all .35s ease-in-out}@media (max-width:1024px){.search-slide-enter-active[data-v-78a20f42],.search-slide-leave-active[data-v-78a20f42]{transition:all .25s ease-in-out}}.search-slide-enter[data-v-78a20f42],.search-slide-leave-to[data-v-78a20f42]{transform:translateX(100%)}.fade-enter-active[data-v-78a20f42],.fade-leave-active[data-v-78a20f42]{transition:opacity .3s}.fade-enter[data-v-78a20f42],.fade-leave-active[data-v-78a20f42]{opacity:0}.fade-move[data-v-78a20f42]{transition:transform .3s}.fade-leave-active[data-v-78a20f42]{position:absolute}.list-slide-enter[data-v-78a20f42],.list-slide-leave-to[data-v-78a20f42]{opacity:0;transform:translateY(30px)}.list-slide-leave-active[data-v-78a20f42]{width:100%;position:absolute}.slide-up-enter-active[data-v-78a20f42]{transition:all .3s ease .1s}.slide-up-leave-active[data-v-78a20f42]{transition:all .3s ease}.slide-up-enter[data-v-78a20f42],.slide-up-leave-active[data-v-78a20f42]{transform:translateY(-20px);opacity:0}.slide-up-move[data-v-78a20f42]{transition:all .5s}.dialog[data-v-78a20f42]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;background-color:var(--code-background);overflow:hidden}.close[data-v-78a20f42]{position:fixed;top:40px;right:40px}@media (max-width:1024px){.close[data-v-78a20f42]{top:22px;right:35px}}.close .icon-close[data-v-78a20f42]{font-size:36px;transition:all .1s linear;cursor:pointer}.close .icon-close[data-v-78a20f42]:hover{color:var(--theme-active)}@media (max-width:1024px){.close .icon-close[data-v-78a20f42]{font-size:30px}}",""]),e.exports=t},497:function(e,t,n){"use strict";n(469)},498:function(e,t,n){(t=n(17)(!1)).push([e.i,'.article-header[data-v-857c99ec]{position:relative;display:flex;justify-content:center;align-items:center;width:calc(100% - 160px);height:calc(100vh - 240px);margin:0 auto;max-width:1520px;color:#fff;border-radius:5px;background:no-repeat 50%;background-size:cover;box-sizing:border-box;overflow:hidden}.article-header[data-v-857c99ec]:before{position:absolute;top:0;right:0;bottom:0;left:0;display:block;width:100%;height:100%;content:"";opacity:.35;background-color:#394245;background-image:linear-gradient(234deg,#394245,#000)}@media (max-width:1440px){.article-header[data-v-857c99ec]{width:100%;border-radius:0}}@media (max-width:1024px){.article-header[data-v-857c99ec]{height:calc(100vh - 160px)}}@media (max-width:480px){.article-header[data-v-857c99ec]{height:auto;padding:15vh 0}}.article-header .header-wrapper[data-v-857c99ec]{width:100%;max-width:1200px;z-index:1;box-sizing:border-box;position:relative;margin:0 auto}@media (max-width:1440px){.article-header .header-wrapper[data-v-857c99ec]{padding:0 85px}}@media (max-width:1024px){.article-header .header-wrapper[data-v-857c99ec]{padding:0 60px}}@media (max-width:768px){.article-header .header-wrapper[data-v-857c99ec]{padding:0 35px}}@media (max-width:480px){.article-header .header-wrapper[data-v-857c99ec]{padding:0 15px}}.article-header .content[data-v-857c99ec]{padding:60px 200px;margin-top:-10vh}@media (max-width:1440px){.article-header .content[data-v-857c99ec]{padding:40px 100px}}@media (max-width:1024px){.article-header .content[data-v-857c99ec]{padding:30px 50px}}@media (max-width:480px){.article-header .content[data-v-857c99ec]{padding:10px 0;margin-top:0}}.article-header .title[data-v-857c99ec]{margin:.7em 0;line-height:1;font-size:46px;font-weight:700}@media (max-width:480px){.article-header .title[data-v-857c99ec]{font-size:24px}}.article-header .author-wrapper[data-v-857c99ec]{font-size:13px}@media (max-width:480px){.article-header .author-wrapper[data-v-857c99ec]{font-size:11px}}.article-header .author-wrapper .author-name[data-v-857c99ec]{font-size:18px;font-weight:700;cursor:pointer}@media (max-width:480px){.article-header .author-wrapper .author-name[data-v-857c99ec]{font-size:13px}}.article-header .author-wrapper .author-name[data-v-857c99ec]:not(:first-child):before{content:"、"}.article-container[data-v-857c99ec]{width:100%;max-width:1200px;z-index:1;box-sizing:border-box;position:relative;margin:-10vh auto 0;border-radius:5px 5px 0 0}@media (max-width:1440px){.article-container[data-v-857c99ec]{padding:0 85px}}@media (max-width:1024px){.article-container[data-v-857c99ec]{padding:0 60px}}@media (max-width:768px){.article-container[data-v-857c99ec]{padding:0 35px}}@media (max-width:480px){.article-container[data-v-857c99ec]{padding:0 15px;margin-top:0}}.article-container .content[data-v-857c99ec]{padding:60px 200px 5px;border-radius:5px 5px 0 0;background-color:var(--app-background-color-light);transition:all .1s linear}@media (max-width:1440px){.article-container .content[data-v-857c99ec]{padding:40px 100px 5px}}@media (max-width:1024px){.article-container .content[data-v-857c99ec]{padding:30px 50px 5px}}@media (max-width:480px){.article-container .content[data-v-857c99ec]{padding:10px 0 5px;box-shadow:none;background-color:var(--app-background-color)}}.article-container .split-line[data-v-857c99ec]{margin:20px 0}@media (max-width:480px){.article-container .split-line[data-v-857c99ec]{margin:10px 0}}.comment-container[data-v-857c99ec]{margin-top:0;border-radius:0 0 5px 5px}.comment-container .content[data-v-857c99ec]{padding-top:5px}@media (max-width:480px){.comment-container[data-v-857c99ec]{margin-top:0}.comment-container .content[data-v-857c99ec]{padding-top:0}}.like-wrapper[data-v-857c99ec]{position:fixed;right:0;bottom:21%;z-index:2000;box-shadow:0 2px 4px 0 rgba(0,0,0,.14)}@media (max-width:480px){.like-wrapper[data-v-857c99ec]{display:none}}.like-wrapper .item[data-v-857c99ec]{display:flex;justify-content:center;align-items:center;position:relative;width:42px;height:42px;border:1px solid var(--tag-color);background-color:var(--app-background-color);cursor:pointer}.like-wrapper .item[data-v-857c99ec]:not(:last-child){border-bottom:none}.like-wrapper .item:hover>i[data-v-857c99ec]{color:var(--theme-active)}.like-wrapper .item .count[data-v-857c99ec]{position:absolute;top:0;left:0;padding:0 5px;font-size:13px;border-radius:8px;transform:translate(-50%,-50%);background-color:var(--tag-color)}.like-wrapper .item>i[data-v-857c99ec]{font-size:20px;transition:all .15s linear}.like-wrapper .item .is-like[data-v-857c99ec]{color:var(--theme-active)}.article-info-wrapper[data-v-857c99ec]{display:flex;justify-content:space-between;align-items:center}.tags-wrapper[data-v-857c99ec]{display:flex;justify-content:flex-start;font-size:1rem}.tags-wrapper>i[data-v-857c99ec]{margin:8px 10px 0 0;font-size:1.4rem}.tags-wrapper .tags[data-v-857c99ec]{display:flex;justify-content:flex-start;flex-wrap:wrap;margin-top:10px}.tags-wrapper .tags .tag-item[data-v-857c99ec]{cursor:pointer}.tags-wrapper .tags .tag-item[data-v-857c99ec]:not(:first-child):before{content:"、"}.like-btn[data-v-857c99ec]{display:flex;justify-content:center;align-items:center;width:30px;height:30px;margin-top:5px;font-size:1rem;cursor:pointer}.like-btn>i[data-v-857c99ec]{margin-right:6px;font-size:1.4rem}.like-btn>i[data-v-857c99ec]:hover{color:var(--theme-active)}.like-btn>span[data-v-857c99ec]{white-space:nowrap}.like-btn .is-like[data-v-857c99ec]{color:var(--theme-active)}',""]),e.exports=t},510:function(e,t,n){"use strict";n.r(t);n(22),n(11),n(10),n(8),n(20),n(61),n(98);var r=n(6),o=(n(5),n(0)),c=n(26),l={props:{articles:{type:Array,default:function(){return[]}}}},d=(n(489),n(4)),m=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"recommend-container"},e._l(e.articles,(function(article){return n("li",{key:article.id,staticClass:"recommend-item"},[n("time",{staticClass:"time",attrs:{datetime:e._f("filterTime")(article.create_time,"Y-m-d")}},[e._v(e._s(e._f("filterTime")(article.create_time,"Y-m-d")))]),e._v(" "),n("span",{staticClass:"title",on:{click:function(t){return e.$emit("showRecommendDetail",article.id)}}},[e._v(e._s(article.title)+"\n      "),n("span",{staticClass:"hover-dot"})])])})),0)}),[],!1,null,"cd9dee48",null).exports,v=(n(208),n(442)),f={props:{comments:{type:Array,required:!0},total:{type:Number,default:0},loading:{type:Boolean,default:!1}},data:function(){return{likeComments:[]}},computed:{isLoadMore:function(){return!(!this.comments.length||this.loading)&&this.total>this.comments.length}},methods:{isLike:function(e){return this.likeComments.includes(e)},reply:function(e){this.$emit("reply",e)},gravatar:function(e){return Object(v.a)(e)},likeComment:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.likeComments.includes(e.id)){n.next=2;break}return n.abrupt("return");case 2:try{t.$store.dispatch("article/likeComment",e.id),t.likeComments.push(e.id),window.localStorage.setItem("LIKE_COMMENTS",JSON.stringify(t.likeComments))}catch(e){}case 3:case"end":return n.stop()}}),n)})))()},getLikeComments:function(){this.likeComments=JSON.parse(window.localStorage.getItem("LIKE_COMMENTS")||"[]")}},created:function(){this.getLikeComments()}},h=(n(491),Object(d.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"comment-list"},[e._l(e.comments,(function(t){return n("li",{key:t.id,staticClass:"comment-item"},[n("img",{staticClass:"avatar",attrs:{src:e.gravatar(t.email),alt:t.nickname||"匿名用户"}}),e._v(" "),n("section",{staticClass:"comment-detail markdown"},[n("div",{staticClass:"nickname"},[n("img",{staticClass:"mobile-avatar",attrs:{src:e.gravatar(t.email),alt:t.nickname||"匿名用户"}}),e._v(" "),t.website?n("a",{staticClass:"website icon icon-planet",attrs:{href:t.website,target:"_blank"}}):e._e(),e._v(" "),n("span",[e._v(e._s(t.nickname))])]),e._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:e._s(t.content)}}),e._v(" "),t.reply?n("section",{staticClass:"reply-wrapper markdown"},[e._m(0,!0),e._v(" "),n("div",{domProps:{innerHTML:e._s(t.reply)}})]):e._e(),e._v(" "),t.children.length?e._l(t.children,(function(t){return n("section",{staticClass:"reply-wrapper markdown"},[n("div",{staticClass:"reply-nickname"},[e._v(e._s(t.nickname)+"：")]),e._v(" "),n("div",{domProps:{innerHTML:e._s(t.content)}})])})):e._e(),e._v(" "),n("footer",{staticClass:"comment-footer"},[n("time",{staticClass:"time",attrs:{datetime:e._f("filterTime")(t.create_time)}},[e._v(e._s(e._f("filterTime")(t.create_time))+"\n                ")]),e._v(" "),n("div",{staticClass:"tools"},[n("i",{staticClass:"icon icon-like",class:{"is-like":e.isLike(t.id)},on:{click:function(n){return e.likeComment(t)}}},[n("span",{staticClass:"like-count"},[e._v(e._s(t.like))])]),e._v(" "),n("i",{staticClass:"icon icon-reply",on:{click:function(n){return e.reply(t)}}})])]),e._v(" "),n("div",{staticClass:"split"})],2)])})),e._v(" "),e.isLoadMore?n("div",{staticClass:"load-more",on:{click:function(t){return e.$emit("loadMore")}}}):e._e(),e._v(" "),e.loading?n("loading"):e._e(),e._v(" "),e.loading||e.comments.length?e._e():n("empty",{attrs:{message:"还没有评论 /(ㄒoㄒ)/~~",isBack:!1}})],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"reply-nickname"},[t("i",{staticClass:"iconfont iconzuozhe"}),this._v("：\n                    ")])}],!1,null,"39749f27",null).exports),x={components:{CommentEditor:n(450).a,CommentList:h},props:{total:{type:Number,default:0},comments:{type:Array,default:function(){return[]}},articleId:{type:Number},loading:{type:Boolean,default:!1}},data:function(){return{isShowReplyContent:!1,parentId:0,page:0}},methods:{onLoadMore:function(){this.loading||(this.page++,this.$store.dispatch("article/getMoreComments",{page:this.page,count:10}))},onReply:function(e){this.parentId=e.id,this.$refs.editor.reply={nickname:e.nickname,content:e.content},this.isShowReplyContent=!0},closeReply:function(){this.isShowReplyContent=!1,this.parentId=0,this.$refs.editor.reply={nickname:"",content:""},this.$refs.editor.resetField()},onSend:function(data){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.articleId){t.next=2;break}return t.abrupt("return");case 2:if(!e.isShowReplyContent){t.next=18;break}if(e.parentId){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,data.classId=e.articleId,data.parentId=e.parentId,t.next=10,e.$store.dispatch("article/replyComment",data);case 10:1===t.sent.code&&(e.closeReply(),e.$emit("createCommentSuccess")),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(5);case 16:t.next=29;break;case 18:return t.prev=18,data.classId=e.articleId,data.parentId=e.parentId,t.next=23,e.$store.dispatch("article/createComment",data);case 23:1===t.sent.code&&(e.$refs.editor.resetField(),e.$emit("createCommentSuccess")),t.next=29;break;case 27:t.prev=27,t.t1=t.catch(18);case 29:case"end":return t.stop()}}),t,null,[[5,14],[18,27]])})))()}}},w=(n(493),Object(d.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-container"},[n("comment-editor",{ref:"editor",attrs:{isShowReplyContent:e.isShowReplyContent},on:{closeReplyContent:e.closeReply,send:e.onSend}}),e._v(" "),n("div",{staticClass:"comment-list-wrapper"},[n("comment-list",{attrs:{total:e.total,comments:e.comments,loading:e.loading},on:{loadMore:e.onLoadMore,reply:e.onReply}})],1)],1)}),[],!1,null,"368c1000",null).exports),k=n(434),y=n(130),C=n(126),_={props:{loading:{type:Boolean,default:!1},imgSrc:{type:String,default:""},visible:{type:Boolean,default:!1}},data:function(){return{tmp:{overflow:""}}},directives:{ClickOutside:n.n(C).a},computed:{dialogVisible:function(){return this.visible?this.lock():this.unlock(),this.visible}},methods:{lock:function(){this.tmp.overflow=document.body.style.overflow,document.body.style.overflow="hidden"},unlock:function(){document.body.style.overflow=this.tmp.overflow},close:function(){this.unlock(),this.$emit("update:visible",!1)}}},dialog=(n(495),Object(d.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisible,expression:"dialogVisible"}],staticClass:"dialog"},[n("div",{staticClass:"close",on:{click:e.close}},[n("i",{staticClass:"icon icon-close"})]),e._v(" "),n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],staticClass:"dialog-body"},[e._t("default"),e._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.imgSrc?n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{src:e.imgSrc}}):e._e()])],2)])])}),[],!1,null,"78a20f42",null).exports),j=n(72),S=n(42),O=n(7);function L(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $={name:"article-detail",components:{Recommend:m,Comment:w,SplitLine:k.a,TagList:y.a,Dialog:dialog,ClientOnly:j.a},head:function(){return{title:this.article.title}},fetch:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,r=e.params,o=n.state.app.token,t.next=4,n.dispatch("article/getArticleDetail",{id:r.id,isFront:!!o});case 4:return t.next=6,n.dispatch("article/getComments",{classId:r.id,page:0,count:10});case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{dialogVisible:!1,imgLoading:!1,imgSrc:"",id:0,likeArticles:[],articleCover:{},articleLike:0}},computed:z(z({comments_total:function(){return this.$store.state.article.comments_total},recommend_total:function(){return this.$store.state.article.recommend_total},loading:function(){return this.$store.state.article.loading}},Object(O.c)({article:function(e){var article=e.article.article;if(!article)return{};var t=article.bgCover||article.cover;return this.articleCover=t?{backgroundImage:"url(".concat(t,")")}:{backgroundImage:"url(".concat(S.a.defaultStar.cover,")")},this.articleLike=article.like,article},comments:function(e){return e.article.comments}})),{},{isLike:function(){return this.likeArticles.includes(this.id)},haveCategoryArtilces:function(){return this.article.categoryArticles&&this.article.categoryArticles.length},markedContent:function(){return this.article.content?0===this.article.articleType||1===this.article.articleType?this.article.content:Object(c.a)(this.article.content):""}}),methods:{onSelectCategory:function(e){this.$router.push("/category/".concat(e.id))},marked:function(content){return Object(c.a)(content)},likeArticle:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLike){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$store.dispatch("article/likeArticle",e.id);case 5:3===t.sent.code&&(e.articleLike++,e.likeArticles.push(e.id),window.localStorage.setItem("LIKE_ARTICLES",JSON.stringify(e.likeArticles))),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})))()},scrollToComment:function(){this.$refs.commentArea.scrollIntoView({behavior:"smooth"})},onShowRecommendDetail:function(e){this.id=e,this.$router.push({path:"/article/".concat(e)})},getLikeArticles:function(){this.likeArticles=JSON.parse(window.localStorage.getItem("LIKE_ARTICLES")||"[]")},getComments:function(){this.$store.dispatch("article/getComments",{classId:this.id})},initImg:function(){var e=this;n.e(0).then(n.bind(null,509)).then((function(e){e.default(".image-popper")})),this.$refs.markedContent.addEventListener("click",(function(t){var n=t.target;if("img"===n.nodeName.toLocaleLowerCase()&&n.classList.contains("image-popper")){t.stopPropagation(),e.imgLoading=!0,e.dialogVisible=!0;var r=n.dataset.origin,image=new Image;image.src=r,image.onload=function(){e.imgSrc=r,e.imgLoading=!1},image.onerror=function(){e.imgSrc=r,e.imgLoading=!1}}}))}},created:function(){this.id=this.$nuxt.$route.params.id,this.getLikeArticles()},mounted:function(){var e=this;this.$nextTick((function(){e.initImg()}))}},E=(n(497),Object(d.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("client-only",{attrs:{public:e.article.public}},[n("header",{staticClass:"article-header",style:e.articleCover},[n("div",{staticClass:"header-wrapper"},[n("div",{staticClass:"content"},[n("tag-list",{attrs:{tagList:e.article.categories},on:{selectTag:e.onSelectCategory}}),e._v(" "),n("h1",{staticClass:"title"},[e._v(e._s(e.article.title))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.article.create_time,expression:"article.create_time"}],staticClass:"author-wrapper"},[e._v("\n                    by \n                    "),e._l(e.article.authors,(function(t){return n("nuxt-link",{key:t.id,staticClass:"author-name",attrs:{tag:"span",to:"/about/"+t.id}},[e._v(e._s(t.nickname)+"\n                    ")])})),e._v("\n                     "),n("time",{attrs:{datetime:e._f("filterTime")(e.article.create_time)}},[e._v(" "+e._s(e._f("filterTime")(e.article.create_time))+"\n                ")])],2)],1)])]),e._v(" "),n("div",{staticClass:"article-container"},[n("div",{staticClass:"content"},[n("div",{staticClass:"article-wrapper"},[n("article",{ref:"markedContent",staticClass:"markdown",domProps:{innerHTML:e._s(e.markedContent)}})]),e._v(" "),n("div",{staticClass:"article-info-wrapper"},[n("div",{staticClass:"tags-wrapper"},[n("i",{staticClass:"icon icon-tags-fill"}),e._v(" "),n("ul",{staticClass:"tags"},e._l(e.article.tags,(function(t){return n("nuxt-link",{key:t.id,staticClass:"tag-item",attrs:{tag:"li",to:"/tag/"+t.id}},[e._v(e._s(t.name)+"\n                        ")])})),1)]),e._v(" "),n("div",{staticClass:"like-btn",on:{click:e.likeArticle}},[n("i",{staticClass:"icon icon-heart-fill",class:{"is-like":e.isLike}}),e._v(" "),n("span",[e._v(e._s(e.articleLike))])])]),e._v(" "),e.haveCategoryArtilces?[n("split-line",{staticClass:"split-line",attrs:{icon:"recommend",desc:"相关推荐"}}),e._v(" "),n("div",{staticClass:"recommend-wrapper"},[n("recommend",{attrs:{articles:e.article.categoryArticles},on:{showRecommendDetail:e.onShowRecommendDetail}})],1)]:e._e()],2)]),e._v(" "),n("div",{ref:"commentArea",staticClass:"article-container comment-container"},[n("div",{staticClass:"content"},[n("split-line",{staticClass:"split-line",attrs:{icon:"message",desc:"评论"}}),e._v(" "),n("div",{staticClass:"comment-wrapper"},[n("comment",{attrs:{loading:e.loading,total:e.comments_total,comments:e.comments,articleId:parseInt(e.id)},on:{createCommentSuccess:e.getComments}})],1)],1)]),e._v(" "),n("aside",{staticClass:"like-wrapper"},[n("div",{staticClass:"item",on:{click:e.likeArticle}},[n("span",{staticClass:"count"},[e._v(e._s(e.articleLike))]),e._v(" "),n("i",{staticClass:"icon icon-heart-fill",class:{"is-like":e.isLike}})]),e._v(" "),n("div",{staticClass:"item",on:{click:e.scrollToComment}},[n("span",{staticClass:"count"},[e._v(e._s(e.comments.length))]),e._v(" "),n("i",{staticClass:"icon icon-message-fill"})])]),e._v(" "),n("Dialog",{attrs:{visible:e.dialogVisible,loading:e.imgLoading,imgSrc:e.imgSrc},on:{"update:visible":function(t){e.dialogVisible=t}}})],1)}),[],!1,null,"857c99ec",null));t.default=E.exports}}]);