{"version":3,"file":"0.js","sources":["webpack:///./services/utils/lazy-img.js"],"sourcesContent":["/**\r\n * 图片懒加载\r\n */\r\nfunction getImgs(el) {\r\n    const imgs = Array.from(document.querySelectorAll(el))\r\n    imgs.forEach(v => io.observe(v))\r\n}\r\n\r\nfunction loadImg(el) {\r\n    if (!el.src) {\r\n        el.src = el.dataset.src\r\n    }\r\n}\r\n\r\nconst io = new IntersectionObserver(entries => {\r\n    entries.forEach(item => {\r\n        const el = item.target\r\n        const intersectionRatio = item.intersectionRatio\r\n        if (intersectionRatio > 0 && intersectionRatio <= 1) {\r\n            loadImg(el)\r\n        }\r\n        el.onload = () => {\r\n            el.classList.add('loaded')\r\n            el.previousElementSibling.classList.add('hidden');  // 图片加载后隐藏缩略图\r\n            io.unobserve(el)\r\n        }\r\n        el.onerror = () => io.unobserve(el)\r\n    })\r\n})\r\n\r\nexport default getImgs\r\n"],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;;;;A","sourceRoot":""}